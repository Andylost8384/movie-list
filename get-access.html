<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Get Access ‚Äî Infectaria</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<header class="topbar">
  <div class="container">
    <div class="brand">Infectaria</div>
    <nav class="nav">
      <a href="index.html">Home</a>
      <a href="models.html">Models</a>
      <a href="videos.html?category=Hentaied">Hentaied</a>
      <a href="videos.html?category=Lesbian">Lesbian</a>
      <a href="videos.html?category=All">All Sites</a>
      <button id="searchBtn" class="icon">üîç</button>
      <a href="login.html" class="login">Login</a>
      <a href="profile.html" class="login">Account</a>
    </nav>
  </div>
</header>

<main style="padding-top:110px;">
  <section class="container auth-steps">

    <!-- STEP INDICATOR -->
    <div class="step-indicator">
      <div class="step-dot active">1</div>
      <div class="step-dot">2</div>
      <div class="step-dot">3</div>
    </div>

    <!-- ================= STEP 1 ================= -->
    <div class="auth-step" id="step1">
      <h1>Create your account</h1>
      <p class="models-subtitle">
        Enter your email and password to create your account.
      </p>

      <form class="login-form" id="signupForm">
        <label>Email
          <input type="email" id="signupEmail" required>
        </label>

        <label>Password
          <input type="password" id="signupPassword" required>
        </label>

        <button type="submit" class="btn green" id="signupBtn">
          Continue
        </button>
      </form>

      <p id="signupMessage" style="margin-top:14px;color:red;"></p>
    </div>

    <!-- ================= STEP 2 ================= -->
    <div class="auth-step hidden" id="step2">
      <h1>Choose your plan</h1>

      <div class="plans-grid">
        <div class="plan-card">
          <h2>30 DAYS</h2>
          <p>Streaming Only</p>
          <p><strong>$0.77 (‚Çπ69)</strong></p>

          <button class="btn green" id="toPayment">
            Choose this plan
          </button>
        </div>
      </div>
    </div>

    <!-- ================= STEP 3 ================= -->
    <div class="auth-step hidden" id="step3">
      <h1>Complete payment</h1>

      <div class="pay-grid">

        <div class="pay-card">
          <h2>India ‚Äî UPI</h2>
          <img src="https://ik.imagekit.io/uno5sox6q/WhatsApp.jpg" class="upi-qr">
          <p>UPI ID: <strong>your-upi-id@upi</strong></p>
          <p>Amount: ‚Çπ69</p>
        </div>

        <div class="pay-card">
          <h2>International ‚Äî Binance</h2>
          <p>Binance Pay ID: <strong>YOUR_BINANCE_ID</strong></p>
        </div>

      </div>

      <button class="btn green" id="confirmPayment">
        I've completed the payment
      </button>

      <p id="paymentMsg" style="margin-top:14px;color:green;"></p>
    </div>

  </section>
</main>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
<script src="firebase-config.js"></script>

<script>
const auth = firebase.auth();
const db   = firebase.database();

/* STEP SWITCH */
function showStep(n){
  document.querySelectorAll('.auth-step')
    .forEach(s => s.classList.add('hidden'));
  document.getElementById('step'+n).classList.remove('hidden');
}

/* ================= SIGNUP ================= */
document.getElementById("signupForm").addEventListener("submit", e => {
  e.preventDefault();

  signupMessage.textContent = "";
  signupBtn.disabled = true;
  signupBtn.textContent = "Creating...";

  const email = signupEmail.value.trim();
  const pass  = signupPassword.value;

  auth.createUserWithEmailAndPassword(email, pass)
    .then(cred => {
      // Save user in DB
      db.ref("users/"+cred.user.uid).set({
        email: email,
        premium: false,
        createdAt: Date.now()
      });

      showStep(2);
    })
    .catch(err => {

      if (err.code === "auth/email-already-in-use") {
        signupMessage.textContent =
          "This email is already registered. Please login.";
      } else {
        signupMessage.textContent = err.message;
      }

      signupBtn.disabled = false;
      signupBtn.textContent = "Continue";
    });
});

/* STEP 2 ‚Üí STEP 3 */
document.getElementById("toPayment").addEventListener("click", ()=>{
  showStep(3);
});

/* PAYMENT CONFIRM */
document.getElementById("confirmPayment").addEventListener("click", ()=>{
  paymentMsg.textContent =
    "Payment confirmation received. Premium will be activated shortly.";

  setTimeout(()=>{
    window.location.href = "profile.html";
  }, 3000);
});
</script>

<script src="search.js"></script>
<script src="script.js"></script>
</body>
</html>
